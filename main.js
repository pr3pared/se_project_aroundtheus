!function(){"use strict";class e{constructor(e,t,s){this.name=e.name,this.link=e.link,this.alt=e.alt,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._likeButton=this._cardElement.querySelector(".elements__button"),this._deleteButton=this._cardElement.querySelector(".elements__button_delete"),this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this.name,link:this.link})}))}_handleLikeIcon(){this._likeButton.classList.toggle("elements__button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".elements__card").cloneNode(!0),this._cardTitle=this._cardElement.querySelector(".elements__title"),this._cardImageEl=this._cardElement.querySelector(".elements__card-image"),this._cardTitle.textContent=this.name,this._cardImageEl.src=this.link,this._cardImageEl.alt=this.alt,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}_handleSubmitButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}_enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._handleSubmitButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetForm(){this._formElement.reset()}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._popupCloseButton=this._popupElement.querySelector(".popup__close"),this._handleClickClose=this._handleClickClose.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.remove("popup_hidden"),document.addEventListener("click",this._handleClickClose),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.add("popup_hidden"),document.removeEventListener("click",this._handleClickClose),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleClickClose(e){e.target.classList.contains("popup")&&this.close()}setEventListeners(){this._popupCloseButton.addEventListener("click",(()=>this.close()))}}var n=class extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._handleFormSubmit=t,this.inputs=this._popupForm.querySelectorAll("input")}_getInputValues(){const e={};return this.inputs.forEach((t=>{e[t.name]=t.value})),e}_submitForm(e){e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>this._submitForm(e)))}};const i={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},o=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__add-button"),l=document.querySelector(".elements__list"),a=document.forms["profile-form"],p=document.forms["card-form"],c=a.querySelector(".popup__input_type_name"),u=a.querySelector(".popup__input_type_description"),_=(p.querySelector(".popup__input_type_place"),p.querySelector(".popup__input_type_image"),new class{constructor(e){let{profileNameSelector:t,profileDescriptionSelector:s}=e;this._profileName=document.querySelector(t),this._profileDescription=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,description:this._profileDescription.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._profileName.textContent=t,this._profileDescription.textContent=s}}({profileNameSelector:".profile__name",profileDescriptionSelector:".profile__description"})),m=new class extends s{constructor(e){super({popupSelector:e}),this._imageElement=this._popupElement.querySelector(".popup-photo__image"),this._captionElement=this._popupElement.querySelector(".popup-photo__title")}open(e){let{name:t,link:s}=e;this._imageElement.src=s,this._imageElement.alt=t,this._captionElement.textContent=t,super.open()}}(".popup-photo");function d(t){return new e(t,"#card-template",(e=>m.open(e))).getTemplate()}m.setEventListeners();const h=new n(".popup-card",(e=>{const t=d({name:e["first-input"],link:e["second-input"],alt:e["first-input"]});v.addItem(t,"prepend"),h.close(),S.resetForm(),S.disableSubmitButton()}));h.setEventListeners();const E=new n(".popup-profile",(e=>{_.setUserInfo({name:e["first-input"],description:e["second-input"]}),E.close()}));E.setEventListeners(),o.addEventListener("click",(()=>{const{name:e,description:t}=_.getUserInfo();c.value=e,u.value=t,E.open()})),r.addEventListener("click",(()=>{h.open()}));const v=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._elementsList=t}renderItems(){this._items.forEach((e=>{this._renderer(e,"append")}))}addItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"appendChild";this._elementsList[t]&&this._elementsList[t](e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg",alt:"Yosemite"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg",alt:"Lake Louise"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg",alt:"Bald Mountains"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg",alt:"Latemar"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg",alt:"Vanoise"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg",alt:"Lago"}],renderer:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";const s=d(e);v.addItem(s,t)}},l);v.renderItems();const S=new t(i,p);S.enableValidation(),new t(i,a).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxFQUUvQixHSCtFQSxDQUNFUCxNRG5Hd0IsQ0FDMUIsQ0FDRXhILEtBQU0sa0JBQ05DLEtBQU0scUdBQ05DLElBQUssWUFFUCxDQUNFRixLQUFNLGNBQ05DLEtBQU0sd0dBQ05DLElBQUssZUFFUCxDQUNFRixLQUFNLGlCQUNOQyxLQUFNLDJHQUNOQyxJQUFLLGtCQUVQLENBQ0VGLEtBQU0sVUFDTkMsS0FBTSxvR0FDTkMsSUFBSyxXQUVQLENBQ0VGLEtBQU0sd0JBQ05DLEtBQU0sb0dBQ05DLElBQUssV0FFUCxDQUNFRixLQUFNLGlCQUNOQyxLQUFNLGlHQUNOQyxJQUFLLFNDdUVMdUgsU0FBVSxTQUFDSyxHQUFnQyxJQUF0QkUsRUFBTUMsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBRyxTQUM1QixNQUFNRyxFQUFhdEIsRUFBV2dCLEdBQzlCVixFQUFRQyxRQUFRZSxFQUFZSixFQUM5QixHQUVGcEMsR0FFRndCLEVBQVFTLGNBTVIsTUFBTVAsRUFBbUIsSUFBSTlGLEVBQWNpRSxFQUFzQk0sR0FDakV1QixFQUFpQjVELG1CQUVZLElBQUlsQyxFQUMvQmlFLEVBQ0FJLEdBRW1CbkMsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5hbHQgPSBkYXRhLmFsdDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIC8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByaXZhdGUgTWV0aG9kcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmVsZW1lbnRzX19idXR0b25fZGVsZXRlXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHtcclxuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgbGluazogdGhpcy5saW5rLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQnV0dG9uIEhhbmRsZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19fYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIC8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFB1YmxpYyBNZXRob2RzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gR2V0IFRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiXHJcbiAgICApO1xyXG5cclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gU2V0IENhcmQgRGV0YWlscyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLmFsdDtcclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTZXQgQ2FyZHMgRXZlbnQgTGlzdGVuZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJpdmF0ZSBNZWh0b2RzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICB9XHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KFxyXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcclxuICAgICk7XHJcbiAgfVxyXG4gIF9oYW5kbGVTdWJtaXRCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgfVxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXRCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAvKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQdWJsaWMgTWV0aG9kcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldEZvcm0oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBDbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UgPSB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9oaWRkZW5cIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfaGlkZGVuXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVDbGlja0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLmlucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIC8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByaXZhdGUgTWV0aG9kcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRPYmogPSB7fTtcclxuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0T2JqW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dE9iajtcclxuICB9XHJcblxyXG4gIF9zdWJtaXRGb3JtKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAvKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQdWJsaWMgTWV0aG9kcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT5cclxuICAgICAgdGhpcy5fc3VibWl0Rm9ybShldmVudClcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgICBhbHQ6IFwiWW9zZW1pdGVcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICAgIGFsdDogXCJMYWtlIExvdWlzZVwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkxhdGVtYXJcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICAgIGFsdDogXCJWYW5vaXNlXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICAgIGFsdDogXCJMYWdvXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEltcG9ydHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9maWxlIFNlbGVjdG9ycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFbGVtZW50IFNlbGVjdG9ycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgZWxlbWVudHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlzdFwiKTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUG9wdXAgU2VsZWN0b3JzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZm9ybVwiXTtcclxuY29uc3QgY2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImNhcmQtZm9ybVwiXTtcclxuY29uc3QgcG9wdXBGb3JtUHJvZmlsZU5hbWUgPSBwcm9maWxlRm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIlxyXG4pO1xyXG5jb25zdCBwb3B1cEZvcm1Qcm9maWxlRGVzY3JpcHRpb24gPSBwcm9maWxlRm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuY29uc3QgcG9wdXBDYXJkRm9ybVBsYWNlID0gY2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZV9wbGFjZVwiKTtcclxuY29uc3QgcG9wdXBDYXJkRm9ybUltYWdlID0gY2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZV9pbWFnZVwiKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJJbmZvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBwcm9maWxlTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9wdXAgSGFuZGxpbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSW1hZ2UgUG9wdXAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXAtcGhvdG9cIik7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ2FyZCBQb3B1cCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBcIiNjYXJkLXRlbXBsYXRlXCIsIChkYXRhKSA9PlxyXG4gICAgaW1hZ2VQb3B1cC5vcGVuKGRhdGEpXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZXRUZW1wbGF0ZSgpO1xyXG59XHJcblxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cC1jYXJkXCIsIChmb3JtVmFsdWVzKSA9PiB7XHJcbiAgY29uc3QgY2FyZERhdGEgPSB7XHJcbiAgICBuYW1lOiBmb3JtVmFsdWVzW1wiZmlyc3QtaW5wdXRcIl0sXHJcbiAgICBsaW5rOiBmb3JtVmFsdWVzW1wic2Vjb25kLWlucHV0XCJdLFxyXG4gICAgYWx0OiBmb3JtVmFsdWVzW1wiZmlyc3QtaW5wdXRcIl0sXHJcbiAgfTtcclxuICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcblxyXG4gIHNlY3Rpb24uYWRkSXRlbShuZXdDYXJkLCBcInByZXBlbmRcIik7XHJcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldEZvcm0oKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxufSk7XHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFByb2ZpbGUgUG9wdXAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgbmV3UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXAtcHJvZmlsZVwiLCAoZm9ybVZhbHVlcykgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgIG5hbWU6IGZvcm1WYWx1ZXNbXCJmaXJzdC1pbnB1dFwiXSxcclxuICAgIGRlc2NyaXB0aW9uOiBmb3JtVmFsdWVzW1wic2Vjb25kLWlucHV0XCJdLFxyXG4gIH0pO1xyXG4gIG5ld1Byb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG59KTtcclxubmV3UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICBPcGVuaW5nIGFuZCBDbG9zaW5nIFBvcHVwcyBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwb3B1cEZvcm1Qcm9maWxlTmFtZS52YWx1ZSA9IG5hbWU7XHJcbiAgcG9wdXBGb3JtUHJvZmlsZURlc2NyaXB0aW9uLnZhbHVlID0gZGVzY3JpcHRpb247XHJcbiAgbmV3UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGluZyBOZXcgQ2FyZHMgaW4gQ2FyZC5qcyAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSwgbWV0aG9kID0gXCJhcHBlbmRcIikgPT4ge1xyXG4gICAgICBjb25zdCBhZGROZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgIHNlY3Rpb24uYWRkSXRlbShhZGROZXdDYXJkLCBtZXRob2QpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGVsZW1lbnRzTGlzdFxyXG4pO1xyXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbGlkYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBjYXJkRm9ybSk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBmb3JtVmFsaWRhdGlvbkNvbmZpZyxcclxuICBwcm9maWxlRm9ybVxyXG4pO1xyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVOYW1lU2VsZWN0b3IsIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIC8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFB1YmxpYyBNZXRob2RzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvcHVwLXBob3RvX19pbWFnZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXAtcGhvdG9fX3RpdGxlXCJcclxuICAgICk7XHJcbiAgfVxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHVibGljIE1ldGhvZHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9jYXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgZWxlbWVudHNMaXN0KSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2VsZW1lbnRzTGlzdCA9IGVsZW1lbnRzTGlzdDtcclxuICB9XHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAvKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQdWJsaWMgTWV0aG9kcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihjYXJkRGF0YSwgXCJhcHBlbmRcIik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCwgbWV0aG9kID0gXCJhcHBlbmRDaGlsZFwiKSB7XHJcbiAgICBpZiAodGhpcy5fZWxlbWVudHNMaXN0W21ldGhvZF0pIHtcclxuICAgICAgdGhpcy5fZWxlbWVudHNMaXN0W21ldGhvZF0oZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJuYW1lIiwibGluayIsImFsdCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9kZWxldGVCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEltYWdlRWwiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJnZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGUiLCJ0ZXh0Q29udGVudCIsInNyYyIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0IiwiZXZlcnkiLCJfaGFuZGxlU3VibWl0QnV0dG9uU3RhdGUiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwicmVzZXRGb3JtIiwicmVzZXQiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9wb3B1cENsb3NlQnV0dG9uIiwiX2hhbmRsZUNsaWNrQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZUVzY0Nsb3NlIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJzZXRFdmVudExpc3RlbmVycyIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsImlucHV0cyIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0T2JqIiwiaW5wdXQiLCJ2YWx1ZSIsIl9zdWJtaXRGb3JtIiwiZm9ybVZhbGlkYXRpb25Db25maWciLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiZWxlbWVudHNMaXN0IiwicHJvZmlsZUZvcm0iLCJmb3JtcyIsImNhcmRGb3JtIiwicG9wdXBGb3JtUHJvZmlsZU5hbWUiLCJwb3B1cEZvcm1Qcm9maWxlRGVzY3JpcHRpb24iLCJ1c2VySW5mbyIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJfcmVmMiIsImltYWdlUG9wdXAiLCJfaW1hZ2VFbGVtZW50IiwiX2NhcHRpb25FbGVtZW50IiwiY3JlYXRlQ2FyZCIsIml0ZW0iLCJuZXdDYXJkUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybVZhbHVlcyIsIm5ld0NhcmQiLCJzZWN0aW9uIiwiYWRkSXRlbSIsImFkZEZvcm1WYWxpZGF0b3IiLCJuZXdQcm9maWxlUG9wdXAiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2VsZW1lbnRzTGlzdCIsInJlbmRlckl0ZW1zIiwiY2FyZERhdGEiLCJlbGVtZW50IiwibWV0aG9kIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiYWRkTmV3Q2FyZCJdLCJzb3VyY2VSb290IjoiIn0=